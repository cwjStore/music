(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-userSet-userSet"],{"19dc":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 主题色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.userSet[data-v-dde4256e]{position:absolute;left:0;bottom:0;top:0;right:0;background:#f1f1f1}.header[data-v-dde4256e]{background-color:#d43c33;text-align:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?300?%}.header .lg_button[data-v-dde4256e]{width:%?280?%;height:%?80?%;-webkit-border-radius:%?40?%;border-radius:%?40?%;background-color:#fff;font-size:%?36?%;line-height:%?80?%;font-weight:700}.header .avatar_wrap[data-v-dde4256e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;padding:0 %?60?%}.header .avatar_wrap .avatar[data-v-dde4256e]{width:%?150?%;height:%?150?%;-webkit-border-radius:50%;border-radius:50%}.header .avatar_wrap .userInfo[data-v-dde4256e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#fff;font-size:%?32?%;padding:0 20px;position:relative}.header .avatar_wrap .userInfo .name[data-v-dde4256e]{margin-top:%?20?%;text-align:left;position:absolute;bottom:30px}.header .avatar_wrap .userInfo .follow[data-v-dde4256e]{margin-top:%?20?%;text-align:left;position:absolute;bottom:0}.wrap[data-v-dde4256e]{position:absolute;bottom:%?40?%;left:0;right:0;background:#fff}.wrap .list_item[data-v-dde4256e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-top:%?1?% solid hsla(0,0%,66.7%,.19)}.wrap .list_item .title[data-v-dde4256e]{font-size:%?32?%;padding:12px 15px;-webkit-box-flex:1;-webkit-flex:1;flex:1}',""]),t.exports=e},"3e69":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"userSet"},[i("v-uni-view",{staticClass:"header",style:{"background-image":"url("+t.profile.backgroundUrl+")"}},[t.loginStatus?i("v-uni-view",{staticClass:"avatar_wrap"},[i("v-uni-image",{staticClass:"avatar",attrs:{src:t.profile.avatarUrl}}),i("v-uni-view",{staticClass:"userInfo"},[i("v-uni-view",{staticClass:"name lin1"},[t._v(t._s(t.profile.nickname))]),i("v-uni-view",{staticClass:"follow"},[t._v("关注 "+t._s(t.profile.follows)+" | 被关注 "+t._s(t.profile.followeds))])],1)],1):i("v-uni-view",{staticClass:"lg_button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loginPage.apply(void 0,arguments)}}},[t._v("账号登陆")])],1),i("v-uni-view",{staticClass:"wrap"},[i("v-uni-view",{staticClass:"list_item"},[i("v-uni-view",{staticClass:"title",staticStyle:{"text-align":"center"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[t._v("退出登录")])],1)],1)],1)},o=[]},"9f17":function(t,e,i){"use strict";i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{loginStatus:!1,userId:"",cookie:"",profile:{}}},onShow:function(){this.getCookie(),this.getId(),this.getLoginStatus()},methods:{getCookie:function(){try{var t=uni.getStorageSync("cookie");this.cookie=t||""}catch(e){console.log(e)}},getId:function(){var t=this;uni.getStorage({key:"userId",success:function(e){t.userId=e.data,t.getUserDetail()},fail:function(){t.userId=""}})},getLoginStatus:function(){var t=this;this.$API({url:"/login/status?cookie=".concat(this.cookie)}).then((function(e){301===e.data.code?t.loginStatus=!1:t.loginStatus=!0}))},getUserDetail:function(){var t=this;this.$API({url:"/user/detail?uid=".concat(this.userId)}).then((function(e){404==e.data.code?t.$API({url:"/activate/init/profile?nickname=".concat((new Date).getTime(),"&cookie=").concat(t.cookie)}).then((function(e){t.getUserDetail()})):t.profile=e.data.profile}))},loginPage:function(){uni.navigateTo({url:"../login/login"})},logout:function(){this.$API({url:"/logout"}),uni.clearStorage(),this.cookie="",this.userId="",this.profile={},this.getLoginStatus(),uni.showToast({title:"退出成功"})}}};e.default=a},a301:function(t,e,i){var a=i("19dc");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("d0df7aaa",a,!0,{sourceMap:!1,shadowMode:!1})},a4de:function(t,e,i){"use strict";var a=i("a301"),n=i.n(a);n.a},d0c6:function(t,e,i){"use strict";i.r(e);var a=i("9f17"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},e8f9:function(t,e,i){"use strict";i.r(e);var a=i("3e69"),n=i("d0c6");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("a4de");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"dde4256e",null,!1,a["a"],r);e["default"]=l.exports}}]);